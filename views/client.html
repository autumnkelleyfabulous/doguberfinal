<!DOCTYPE html>
<html lang = "en">
<head>
    <meta charset="utf-8"/>
    <title>Client <%= userId %> </title>
</head>
<body data-userId="<%= userId %>">
    <h1>Hello Client <%= userId %></h1>
    <h4 id="notification"> 
        <!-- Some info will be displayed here-->
    </h4>
    <div id="map"> 
        <!-- We will load a map here later-->
    </div>

    <button onclick="requestARide()">
        Request for help
    </button>
    <!--Load JavaScripts -->

<!-- Load socket.io client library -->
<script src="/socket.io/socket.io.js"></script>
<!-- Load JQuery from a CDN -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<!-- load libraries before your JS code
Write rest of your JS code here -->
<script type="text/javascript">
    var socket = io();
    //Fetch userId from the data-atribute of the body tag
    var userId = document.body.getAttribute("data-userId");
    /*Fire a 'join' event and send your userId to the server, to join a room - room-name will be the userId itself!
*/ 
    socket.emit('join', {userId: userId});
//Declare variables, this will be used later
    var requestDetails = {};
    var clientDetails = {};
    var map, marker;

    //Client's info
requestDetails = {
    clientId: userId,
    location: {
        address: "956, W Cherry St, #101, Louisville, Colorado 80027, USA",
        latitude: 39.9631,
        longitude:  -105.162
    }
}
//When button is clicked, fire request-for-help and send client's userId and location
function requestARide(){
    socket.emit("request-a-ride", requestDetails);
}
//Listen for a "ride-accepted" event
socket.on("ride-accepted", function(eventData){
    copDetails = data; //Save driver details
   //Display driver details
    document.getElementById("notification").innerHTML = "Your Personal Pet Concierge Is On Their Way! \n" + JSON.stringify(driverDetails);
});
   

</script>

    
</body>
</html>